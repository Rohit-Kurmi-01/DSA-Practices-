(num>0) ? ((~num) & mask) : num